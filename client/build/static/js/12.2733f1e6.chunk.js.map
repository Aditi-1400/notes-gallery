{"version":3,"sources":["pages/Login/login.js","helpers/auth.js","../node_modules/js-cookie/src/js.cookie.js"],"names":["Login","history","useState","email","password1","textChange","formData","setFormData","handleChange","text","e","target","value","className","isAuth","to","href","onSubmit","preventDefault","axios","post","process","password","then","res","authenticate","localStorage","setItem","data","token","push","catch","err","console","log","toast","error","response","errors","type","onChange","required","id","name","for","removeCookie","key","window","cookie","remove","expires","removeLocalStorage","removeItem","next","set","JSON","stringify","setLocalStorage","user","get","getCookie","getItem","parse","factory","define","module","exports","OldCookies","Cookies","api","noConflict","extend","i","result","arguments","length","attributes","decode","s","replace","decodeURIComponent","init","converter","document","path","defaults","Date","toUTCString","test","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","json","jar","cookies","parts","slice","join","charAt","read","getJSON","withConverter"],"mappings":"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","file":"static/js/12.2733f1e6.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport {ToastContainer, toast} from 'react-toastify';\nimport {authenticate, isAuth} from \"../../helpers/auth\";\nimport axios from 'axios';\nimport {Redirect} from 'react-router-dom';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../../css/login.css'\n\nconst Login = ({history}) => {\n\n    const [formData, setFormData] = useState({\n        email: '',\n        password1: '',\n        textChange: 'Sign In'\n      });\n\n      const { email, password1 } = formData;\n      const handleChange = text => e => {\n        setFormData({ ...formData, [text]: e.target.value });\n      };\n        \n      const handleSubmit = e => {\n        //console.log(process.env.REACT_APP_API_URL);\n        e.preventDefault();\n        if (email && password1) {\n          setFormData({ ...formData, textChange: 'Submitting' });\n          axios\n            .post(`/api/login`, {\n              email,\n              password: password1\n            })\n            .then(res => {\n              authenticate(res, () => {\n                setFormData({\n                  ...formData,\n                  email: '',\n                  password1: '',\n                  textChange: 'Submitted'\n                });\n                localStorage.setItem('token', res.data.token);\n                \n        if(isAuth()){\n          history.push('/profile');\n                \n        }\n        else {\n          history.push('/');\n               \n        }\n       }\n                \n              );\n            })\n            .catch(err => {\n              setFormData({\n                ...formData,\n                email: '',\n                password1: '',\n                textChange: 'Sign In'\n              });\n              console.log(err);\n              toast.error(err.response.data.errors);\n            });\n        } else {\n          toast.error('Please fill all fields');\n        }\n      };\n  \n\n    return ( \n     \n        <div className=\"Signup\">\n         {!isAuth()?null: <Redirect to = \"/profile\" />}\n            <ToastContainer/>\n            <h1>Log In to Notes Gallery</h1>\n            <p>Don't have an account? <a href=\"/register\">Sign Up</a></p>\n            \n            <div className=\"wrap\">\n            <div className=\"box\">\n            <form onSubmit={handleSubmit}>\n                <div>\n                    <input type=\"email\" \n                    onChange = {handleChange('email')} \n                    value={email} \n                    required/>\n                    <label>Email</label>\n                </div>\n                <div>\n                    <input type=\"password\"\n                    onChange = {handleChange('password1')} \n                    value={password1}  required />\n                    <label>Password</label>\n                </div>\n                <input type=\"checkbox\" id=\"Remember me\" name=\"Remember me\" value=\"Remember me\" />\n                <label for=\"Remember me\"> Remember me</label>\n                <br></br>\n                <a href=\"/forgotPassword\">Forgot Password ?</a>\n                <br></br>\n                <input type=\"submit\" className=\"loginSubmit\" value=\"Login\"/>     \n            </form>\n            </div>\n            </div>\n            \n        </div>\n       \n     );\n}\n \nexport default Login;","import cookie from 'js-cookie';\n\n// Set in Cookie\nexport const setCookie = (key, value) => {\n    if (window !== 'undefined') {\n        cookie.set(key, value, {\n            // 1 Day\n            expires: 1\n        }) \n    }\n}\n\n// remove from cookie\nexport const removeCookie = key => {\n    if (window !== 'undefined') {\n        cookie.remove(key, {\n            expires: 1\n        });\n    }\n};\n\n\n//Get from cookie like token\n\n// Get from cookie such as stored token\n// Will be useful when we need to make request to server with token\nexport const getCookie = key => {\n    if (window !== 'undefined') {\n        return cookie.get(key);\n    }\n};\n\n// Set in localstorage\nexport const setLocalStorage = (key, value) => {\n    if (window !== 'undefined') {\n        localStorage.setItem(key, JSON.stringify(value));\n    }\n};\n\n// Remove from localstorage\nexport const removeLocalStorage = key => {\n    if (window !== 'undefined') {\n        localStorage.removeItem(key);\n    }\n};\n\n// Authenticate user by passing data to cookie and localstorage during signin\nexport const authenticate = (response, next) => {\n    console.log('AUTHENTICATE HELPER ON SIGNIN RESPONSE', response);\n    setCookie('token', response.data.token);\n    setLocalStorage('user', response.data.user);\n    next();\n};\n\n// Access user info from localstorage\nexport const isAuth = () => {\n    if (window !== 'undefined') {\n        const cookieChecked = getCookie('token');\n        if (cookieChecked) {\n            if (localStorage.getItem('user')) {\n                return JSON.parse(localStorage.getItem('user'));\n            } else {\n                return false;\n            }\n        }\n    }\n};\n\nexport const signout = next => {\n    removeCookie('token');\n    removeLocalStorage('user');\n   \n};\n\n//update user data in local storage\nexport const updateUser = (response, next) => {\n    console.log('UPDATE USER IN LOCALSTORAGE HELPERS', response);\n    if (typeof window !== 'undefined') {\n        let auth = JSON.parse(localStorage.getItem('user'));\n        auth = response.data;\n        localStorage.setItem('user', JSON.stringify(auth));\n    }\n    next();\n};","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n"],"sourceRoot":""}